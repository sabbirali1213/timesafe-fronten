<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Map Demo - TimeSafe Delivery</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px; 
            background: #f5f5f5;
        }
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            background: white; 
            border-radius: 8px; 
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        #map { 
            height: 400px; 
            width: 100%; 
            border-radius: 8px; 
            border: 2px solid #e5e5e5;
        }
        .info-box {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #22c55e;
        }
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .feature {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #e5e5e5;
        }
        .feature h3 {
            margin: 0 0 10px 0;
            color: #22c55e;
        }
        h1 {
            color: #dc2626;
            text-align: center;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üó∫Ô∏è FREE Map Integration Demo</h1>
        <p class="subtitle">TimeSafe Delivery Application - OpenStreetMap + Leaflet</p>
        
        <div class="info-box">
            <strong>‚úÖ 100% FREE Maps - No API Keys Required!</strong><br>
            This demo shows the interactive map functionality integrated into your TimeSafe delivery application.
            Click anywhere on the map to select a delivery location!
        </div>

        <div id="map"></div>
        
        <div class="info-box">
            <strong>Selected Location:</strong> <span id="location-info">Click on the map to select a location</span>
        </div>

        <div class="feature-list">
            <div class="feature">
                <h3>üè† Address Selection</h3>
                <p>Interactive map for customers to select precise delivery addresses with click-to-select functionality.</p>
            </div>
            <div class="feature">
                <h3>üè™ Vendor Locations</h3>
                <p>Display nearby mutton vendors on map with distance calculations and location markers.</p>
            </div>
            <div class="feature">
                <h3>üìç Current Location</h3>
                <p>Automatic location detection using browser geolocation API for quick address setup.</p>
            </div>
            <div class="feature">
                <h3>üöö Delivery Tracking</h3>
                <p>Real-time delivery partner location tracking and route optimization (ready for implementation).</p>
            </div>
            <div class="feature">
                <h3>üí∞ Cost-Free</h3>
                <p>Uses OpenStreetMap - completely free, no usage limits, no API keys, no billing required.</p>
            </div>
            <div class="feature">
                <h3>üåç Global Coverage</h3>
                <p>Works worldwide with detailed maps, address search, and location services.</p>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Initialize map centered on Bangalore (default location)
        const map = L.map('map').setView([12.9716, 77.5946], 13);

        // Add OpenStreetMap tile layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Add some sample vendor markers
        const vendors = [
            { lat: 12.9716, lng: 77.5946, name: "TimeSafe Premium Store", business: "Fresh Meat Suppliers" },
            { lat: 12.9800, lng: 77.6000, name: "TimeSafe Halal Center", business: "Certified Halal" },
            { lat: 12.9650, lng: 77.5800, name: "TimeSafe Farm Fresh", business: "Organic Meat" },
            { lat: 12.9750, lng: 77.6100, name: "TimeSafe Quality Shop", business: "Premium Cuts" }
        ];

        // Add vendor markers
        vendors.forEach(vendor => {
            L.marker([vendor.lat, vendor.lng])
                .addTo(map)
                .bindPopup(`<strong>${vendor.name}</strong><br>${vendor.business}`);
        });

        // Add click event for location selection
        let selectedMarker = null;
        
        map.on('click', function(e) {
            const lat = e.latlng.lat;
            const lng = e.latlng.lng;
            
            // Remove previous selected marker
            if (selectedMarker) {
                map.removeLayer(selectedMarker);
            }
            
            // Add new marker at clicked location
            selectedMarker = L.marker([lat, lng])
                .addTo(map)
                .bindPopup('<strong>Selected Delivery Location</strong>')
                .openPopup();
            
            // Update location info
            document.getElementById('location-info').innerHTML = 
                `Latitude: ${lat.toFixed(6)}, Longitude: ${lng.toFixed(6)}`;
        });

        // Add current location button functionality
        if (navigator.geolocation) {
            const locationButton = L.control({position: 'topright'});
            locationButton.onAdd = function(map) {
                const div = L.DomUtil.create('div', 'leaflet-bar leaflet-control leaflet-control-custom');
                div.style.backgroundColor = 'white';
                div.style.width = '40px';
                div.style.height = '40px';
                div.style.cursor = 'pointer';
                div.style.textAlign = 'center';
                div.style.lineHeight = '40px';
                div.innerHTML = 'üìç';
                div.title = 'Use Current Location';
                
                div.onclick = function() {
                    navigator.geolocation.getCurrentPosition(function(position) {
                        const lat = position.coords.latitude;
                        const lng = position.coords.longitude;
                        
                        map.setView([lat, lng], 15);
                        
                        if (selectedMarker) {
                            map.removeLayer(selectedMarker);
                        }
                        
                        selectedMarker = L.marker([lat, lng])
                            .addTo(map)
                            .bindPopup('<strong>Your Current Location</strong>')
                            .openPopup();
                            
                        document.getElementById('location-info').innerHTML = 
                            `Current Location - Lat: ${lat.toFixed(6)}, Lng: ${lng.toFixed(6)}`;
                    });
                };
                
                return div;
            };
            locationButton.addTo(map);
        }
        
        console.log('‚úÖ Free Map Demo Loaded Successfully!');
        console.log('üó∫Ô∏è Features: OpenStreetMap + Leaflet');
    </script>
</body>
</html>